;(function(e,t){"use strict";e.fn.popup=function(t){var n=this.selector,i=new e.Popup(t);e(document).on("click.popup",n,function(n){var o=t&&t.content?t.content:e(this).attr("href");n.preventDefault();i.open(o,undefined,this)});return this.each(function(){e(this).data("popup",i)})};e.Popup=function(n){var i=this,o={backClass:"popup_back",backOpacity:.7,containerClass:"popup_cont",closeContent:'<div class="popup_close">&times;</div>',markup:'<div class="popup"><div class="popup_content"/></div>',contentClass:"popup_content",preloaderContent:'<p class="preloader">Loading</p>',activeClass:"popup_active",hideFlash:false,speed:200,popupPlaceholderClass:"popup_placeholder",keepInlineChanges:true,modal:false,content:null,type:"auto",width:null,height:null,typeParam:"pt",widthParam:"pw",heightParam:"ph",beforeOpen:function(e){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},error:function(){},show:function(e,t){var n=this;n.center();e.animate({opacity:1},n.o.speed,function(){n.o.afterOpen.call(n)})},replaced:function(e,t){this.center().o.afterOpen.call(this)},hide:function(e,t){if(e!==undefined){e.animate({opacity:0},this.o.speed)}},types:{inline:function(t,n){var o=e(t);o.addClass(i.o.popupPlaceholderClass);if(!i.o.keepInlineChanges){s=o.html()}n.call(this,o.children())},image:function(t,n){var o=this;var l=e("<img />").one("load",function(){var e=this;setTimeout(function(){n.call(o,e)},0)}).one("error",function(){i.o.error.call(i,t,"image")}).attr("src",t).each(function(){if(this.complete){e(this).trigger("load")}})},external:function(t,n){var o=e("<iframe />").attr({src:t,frameborder:0,width:i.width,height:i.height});n.call(this,o)},html:function(e,t){t.call(this,e)},jQuery:function(e,t){t.call(this,e.html())},"function":function(e,t){t.call(this,e.call(i))},ajax:function(t,n){e.ajax({url:t,success:function(e){n.call(this,e)},error:function(e){i.o.error.call(i,t,"ajax")}})}}},l=["png","jpg","gif"],a,s,c,r,u,p,f;i.ele=undefined;i.o=e.extend(true,{},o,n);i.open=function(t,n,o){t=t===undefined||t==="#"?i.o.content:t;if(t===null){i.o.error.call(i,t,a);return false}if(o!==undefined){if(i.ele&&i.o.activeClass){e(i.ele).removeClass(i.o.activeClass)}i.ele=o;if(i.ele&&i.o.activeClass){e(i.ele).addClass(i.o.activeClass)}}if(c===undefined){c=e('<div class="'+i.o.backClass+'"/>').appendTo(e("body")).css("opacity",0).animate({opacity:i.o.backOpacity},i.o.speed);if(!i.o.modal){c.one("click.popup",function(){i.close()})}if(i.o.hideFlash){e("object, embed").css("visibility","hidden")}if(i.o.preloaderContent){p=e(i.o.preloaderContent).appendTo(e("body"))}}n=h([n,i.o.type]);n=n==="auto"?d(t):n;a=n;i.width=i.o.width?i.o.width:null;i.height=i.o.height?i.o.height:null;if(e.inArray(n,["inline","jQuery","function"])===-1){var l=C(i.o.typeParam,t),s=C(i.o.widthParam,t),r=C(i.o.heightParam,t);n=l!==null?l:n;i.width=s!==null?s:i.width;i.height=r!==null?r:i.height}i.o.beforeOpen.call(i,n);if(i.o.types[n]){i.o.types[n].call(i,t,m)}else{i.o.types.ajax.call(i,t,m)}};function h(t){var n;e.each(t,function(e,t){if(t){n=t;return false}});return n}function d(t){if(typeof t==="function"){return"function"}else if(t instanceof e){return"jQuery"}else if(t.substr(0,1)==="#"||t.substr(0,1)==="."){return"inline"}else if(e.inArray(t.substr(t.length-3),l)!==-1){return"image"}else if(t.substr(0,4)==="http"){return"external"}else{return"ajax"}}function m(n){if(p){p.fadeOut("fast",function(){e(this).remove()})}var o=true;if(r===undefined){o=false;r=e('<div class="'+i.o.containerClass+'">');f=e(i.o.markup).appendTo(r);u=e(i.o.closeContent).one("click",function(){i.close()}).appendTo(r);e(t).resize(i.center);r.appendTo(e("body")).css("opacity",0)}var l=e("."+i.o.contentClass,r);if(i.width){l.css("width",i.width,10)}else{l.css("width","")}if(i.height){l.css("height",i.height,10)}else{l.css("height","")}if(f.hasClass(i.o.contentClass)){f.html(n)}else{f.find("."+i.o.contentClass).html(n)}if(!o){i.o.show.call(i,r,c)}else{i.o.replaced.call(i,r,c)}}i.close=function(){i.o.beforeClose.call(i);if(a==="inline"&&i.o.keepInlineChanges){s=e("."+i.o.contentClass).html()}if(c!==undefined){c.animate({opacity:0},i.o.speed,function(){i.cleanUp()})}i.o.hide.call(i,r,c);return i};i.cleanUp=function(){c.add(r).remove();r=c=undefined;e(t).unbind("resize",i.center);if(i.o.hideFlash){e("object, embed").css("visibility","visible")}if(i.ele&&i.o.activeClass){e(i.ele).removeClass(i.o.activeClass)}var n=e("."+i.o.popupPlaceholderClass);if(a=="inline"&&n.length){n.html(s).removeClass(i.o.popupPlaceholderClass)}a=null;i.o.afterClose.call(i);return i};i.center=function(){r.css(i.getCenter());c.css({height:document.documentElement.clientHeight});return i};i.getCenter=function(){var e=r.children().outerWidth(true),t=r.children().outerHeight(true),n=document.documentElement.clientWidth,i=document.documentElement.clientHeight;return{top:i*.5-t*.5,left:n*.5-e*.5}};function C(e,t){var n=new RegExp("[?&]"+e+"=([^&]*)").exec(t);return n&&decodeURIComponent(n[1].replace(/\+/g," "))}}})(jQuery,window);